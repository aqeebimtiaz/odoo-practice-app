
/* /website/static/src/js/website.tour.rte.js defined in bundle 'website.assets_editor' */
odoo.define('website.tour.rte',function(require){'use strict';var tour=require("web_tour.tour");var base=require("web_editor.base");tour.register('rte_translator',{test:true,wait_for:base.ready()},[{content:"click on Add a language",trigger:'.js_language_selector a:has(i.fa)',},{content:"select french",trigger:'select[name="lang"]',run:'text "fr_BE"',},{content:"load french",trigger:'.modal-footer button:first',extra_trigger:'.modal select[name="lang"]:propValueContains(fr_BE)',},{content:"go to english version",trigger:'.js_language_selector a[data-lang="en_US"]',extra_trigger:'html[lang*="fr"]',},{content:"Open new page menu",trigger:'#oe_main_menu_navbar a[data-action=new_page]',extra_trigger:'a[data-action="edit"]',},{content:"click on new page",trigger:'a[data-action="new_page"]',},{content:"insert page name",trigger:'#editor_new_page input[type="text"]',run:'text rte_translator',},{content:"create page",trigger:'button.btn-continue',extra_trigger:'input[type="text"]:propValue(rte_translator)',},{content:"drop a snippet",trigger:"#snippet_structure .oe_snippet:eq(1) .oe_snippet_thumbnail",run:'drag_and_drop',},{content:"change content",trigger:'.oe_overlay_options .oe_options:visible',run:function(){$("#wrap p:first").replaceWith('<p>Write one or <font style="background-color: yellow;">two paragraphs <b>describing</b></font> your product or\
                        <font style="color: rgb(255, 0, 0);">services</font>. To be successful your content needs to be\
                        useful to your <a href="/999">readers</a>.</p> <input placeholder="test translate placeholder"/>\
                        <p>&lt;b&gt;&lt;/b&gt; is an HTML&nbsp;tag &amp; is empty</p>');$("#wrap img").attr("title","test translate image title");}},{content:"save",trigger:'button[data-action=save]',extra_trigger:'#wrap p:first b',},{content:"click on french version",trigger:'.js_language_selector a[data-lang="fr_BE"]',extra_trigger:'html[lang*="en"]:not(:has(button[data-action=save]))',},{content:"translate",trigger:'html:not(:has(#wrap p span)) .o_menu_systray a[data-action="translate"]',},{content:"close modal",trigger:'button[data-action="activate"]',},{content:"check if translation is activate",trigger:'[data-oe-translation-id]',},{content:"translate text",trigger:'#wrap p font:first',run:function(action_helper){action_helper.text('translated french text');this.$anchor.trigger('keydown');},},{content:"translate text with special char",trigger:'#wrap input + p span:first',run:function(action_helper){action_helper.click();this.$anchor.prepend('&lt;{translated}&gt;').trigger('keydown');},},{content:"click on input",trigger:'input:first',extra_trigger:'#wrap .o_dirty font:first:contains(translated french text)',run:'click',},{content:"translate placeholder",trigger:'input:first',run:'text test french placeholder',},{content:"close modal",trigger:'button.o_save_button',extra_trigger:'.modal input:propValue(test french placeholder)',},{content:"save translation",trigger:'button[data-action=save]',},{content:"check: content is translated",trigger:'#wrap p font:first:contains(translated french text)',run:function(){},},{content:"check: content with special char is translated",trigger:"#wrap input + p:contains(<{translated}><b></b> is an HTML\xa0tag & )",run:function(){},},{content:"check: placeholder translation",trigger:'input[placeholder="test french placeholder"]',run:function(){},},{content:"return to english version",trigger:'.js_language_selector a[data-lang="en_US"]',extra_trigger:'html[lang*="fr"]:not(:has(#wrap p span))',},{content:"edit english version",trigger:'a[data-action=edit]',extra_trigger:'body:not(:has(#wrap p font:first:containsExact(paragraphs <b>describing</b>)))',},{content:"select text",extra_trigger:'button[data-action=save]',trigger:'#wrap p',run:function(action_helper){action_helper.click();var el=this.$anchor[0];var evt=document.createEvent("MouseEvents");$.summernote.core.range.create(el.childNodes[2],6,el.childNodes[2],13).select();evt.initMouseEvent('mouseup',true,true,window,0,0,0,0,0,false,false,false,false,0,el);el.dispatchEvent(evt);},},{content:"underline",trigger:'.note-air-popover button[data-event="underline"]',},{content:"save new change",trigger:'button[data-action=save]',extra_trigger:'#wrap p u',},{content:"return in french",trigger:'html[lang="en-US"] .js_language_selector a[data-lang="fr_BE"]',extra_trigger:'html[lang*="en"]:not(:has(button[data-action=save]))',},{content:"check bis: content is translated",trigger:'#wrap p font:first:contains(translated french text)',extra_trigger:'body:not(:has(button[data-action=save]))',},{content:"check bis: placeholder translation",trigger:'input[placeholder="test french placeholder"]',},]);});;

/* /website/static/src/js/website.editor.js defined in bundle 'website.assets_editor' */
odoo.define('website.editor',function(require){'use strict';var ajax=require('web.ajax');var core=require('web.core');var Widget=require('web.Widget');var base=require('web_editor.base');var editor=require('web_editor.editor');var widget=require('web_editor.widget');var website=require('website.website');var qweb=core.qweb;var _t=core._t;ajax.loadXML('/website/static/src/xml/website.editor.xml',qweb);website.TopBar.include({events:{'click [data-action="edit"]':'edit',},start:function(){$("#wrapwrap").find("[data-oe-model] .oe_structure.oe_empty, [data-oe-model].oe_structure.oe_empty, [data-oe-type=html]:empty").filter(".oe_not_editable").filter(".oe_no_empty").addClass("oe_empty");if(location.search.indexOf("enable_editor")>=0&&$('html').attr('lang').match(/en[-_]US/)){this.$el.addClass('editing_mode');this.delayed_hide();}
return this._super.apply(this,arguments);},edit:function(){this.$('button[data-action=edit]').prop('disabled',true);this.$el.addClass('editing_mode');editor.editor_bar=new editor.Class(this);editor.editor_bar.prependTo(document.body);$('.o_homepage_editor_welcome_message').remove();this.delayed_hide();},delayed_hide:function(){_.delay((function(){this.do_hide();}).bind(this),800);},});website.TopBarCustomize=Widget.extend({events:{'click > ul a[data-view-id]':'do_customize',},start:function(){this.view_name=$(document.documentElement).data('view-xmlid');if(!this.view_name){this.$el.hide();}
if(this.$el.is(".open")){this.load_menu();}else{this.$el.one("mousedown","> a.dropdown-toggle",this.load_menu.bind(this));}},load_menu:function(){var $menu=this.$el.children("ul");ajax.jsonRpc('/website/customize_template_get','call',{key:this.view_name,full:false}).then(function(result){var current_group="";_.each(result,function(item){if(current_group!==item.inherit_id[1]){current_group=item.inherit_id[1];$menu.append("<li class=\"dropdown-header\">"+current_group+"</li>");}
var $li=$('<li/>',{role:'presentation'}).append($('<a/>',{href:'#','data-view-id':item.id,role:'menuitem'}).append(qweb.render('web_editor.components.switch',{id:'switch-'+item.id,label:item.name})));$li.find('input').prop('checked',!!item.active);$menu.append($li);});});},do_customize:function(e){e.preventDefault();var view_id=$(e.currentTarget).data('view-id');return ajax.jsonRpc('/web/dataset/call_kw','call',{model:'ir.ui.view',method:'toggle',args:[[parseInt(view_id,10)]],kwargs:{context:base.get_context()}}).then(function(){window.location.reload();});},});website.TopBar.include({start:function(){this.customize_menu=new website.TopBarCustomize();var def=this.customize_menu.attachTo($('#customize-menu'));return $.when(this._super(),def);}});widget.LinkDialog.include({bind_data:function(){var self=this;var href=this.data.url;var last;this.$('#link-page').select2({minimumInputLength:1,placeholder:_t("New or existing page"),query:function(q){if(q.term===last)return;last=q.term;$.when(self.page_exists(q.term),self.fetch_pages(q.term)).then(function(exists,results){var rs=_.map(results,function(r){return{id:r.loc,text:r.loc,};});if(!exists){rs.push({create:true,id:q.term,text:_.str.sprintf(_t("Create page '%s'"),q.term),});}
q.callback({more:false,results:rs});},function(){q.callback({more:false,results:[]});});},});if(href){this.page_exists(href).then(function(exist){if(exist){self.$('#link-page').select2('data',{'id':href,'text':href}).change();}else{self.$('input.url').val(href).change();self.$('input.window-new').closest("div").show();}});}
return this._super();},get_data_buy_url:function(def,$e,isNewWindow,label,classes,test){var val=$e.val();if(val&&val.length&&$e.hasClass('page')){var data=$e.select2('data');if(!data.create||test){def.resolve(data.id,isNewWindow,label||data.text,classes);}else{$.get(_.str.sprintf('/website/add/%s?noredirect=1',encodeURI(data.id))).then(function(response){def.resolve(response,isNewWindow,label,classes);});}}else{return this._super.apply(this,arguments);}},changed:function(e){this.$('.url-source').filter(':input').not($(e.target)).val('').filter(function(){return!!$(this).data('select2');}).select2('data',null);this._super(e);},call:function(method,args,kwargs){var self=this;var req=method+'_req';if(this[req]){this[req].abort();}
return this[req]=ajax.jsonRpc('/web/dataset/call_kw','call',{model:'website',method:method,args:args,kwargs:kwargs,}).always(function(){self[req]=null;});},page_exists:function(term){return this.call('page_exists',[null,term],{context:base.get_context(),});},fetch_pages:function(term){return this.call('search_pages',[null,term],{limit:100,context:base.get_context(),});},});base.ready().then(function(){if(location.search.indexOf("enable_editor")<0&&$(".editor_enable").length===0){var $wrap=$("#wrapwrap.homepage #wrap");if($wrap.length&&$wrap.html().trim()===""){var $welcome_message=$(qweb.render("website.homepage_editor_welcome_message"));$welcome_message.css("min-height",$wrap.parent("main").height()-($wrap.outerHeight(true)-$wrap.height()));$wrap.empty().append($welcome_message);}}});});;

/* /website/static/lib/jQuery.transfo.js defined in bundle 'website.assets_editor' */
(function($){'use strict';var rad=Math.PI/180;var methods={init:function(settings){return this.each(function(){var $this=$(this),transfo=$this.data('transfo');if(!transfo){_init($this,settings);}else{_overwriteOptions($this,transfo,settings);_targetCss($this,transfo);}});},destroy:function(){return this.each(function(){var $this=$(this);if($this.data('transfo')){_destroy($this);}});},reset:function(){return this.each(function(){var $this=$(this);if($this.data('transfo')){_reset($this);}});},toggle:function(){return this.each(function(){var $this=$(this);var transfo=$this.data('transfo');if(transfo){transfo.settings.hide=!transfo.settings.hide;_showHide($this,transfo);}});},hide:function(){return this.each(function(){var $this=$(this);var transfo=$this.data('transfo');if(transfo){transfo.settings.hide=true;_showHide($this,transfo);}});},show:function(){return this.each(function(){var $this=$(this);var transfo=$this.data('transfo');if(transfo){transfo.settings.hide=false;_showHide($this,transfo);}});},settings:function(){if(this.length>1){this.map(function(){var $this=$(this);return $this.data('transfo')&&$this.data('transfo').settings;});}
return this.data('transfo')&&$this.data('transfo').settings;},center:function(){if(this.length>1){this.map(function(){var $this=$(this);return $this.data('transfo')&&$this.data('transfo').$center.offset();});}
return this.data('transfo')&&this.data('transfo').$center.offset();}};$.fn.transfo=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.transfo');}
return false;};function _init($this,settings){var transfo={};$this.data('transfo',transfo);transfo.settings=settings;var css="box-sizing: border-box; position: absolute; background-color: #fff; border: 1px solid #ccc; width: 8px; height: 8px; margin-left: -4px; margin-top: -4px;";transfo.$markup=$(''
+'<div class="transfo-container">'
+'<div class="transfo-controls">'
+'<div style="cursor: crosshair; position: absolute; margin: -30px; top: 0; right: 0; padding: 1px 0 0 1px;" class="transfo-rotator">'
+'<span class="fa-stack fa-lg">'
+'<i class="fa fa-circle fa-stack-2x"></i>'
+'<i class="fa fa-repeat fa-stack-1x fa-inverse"></i>'
+'</span>'
+'</div>'
+'<div style="'+css+'top: 0%; left: 0%; cursor: nw-resize;" class="transfo-scaler-tl"></div>'
+'<div style="'+css+'top: 0%; left: 100%; cursor: ne-resize;" class="transfo-scaler-tr"></div>'
+'<div style="'+css+'top: 100%; left: 100%; cursor: se-resize;" class="transfo-scaler-br"></div>'
+'<div style="'+css+'top: 100%; left: 0%; cursor: sw-resize;" class="transfo-scaler-bl"></div>'
+'<div style="'+css+'top: 0%; left: 50%; cursor: n-resize;" class="transfo-scaler-tc"></div>'
+'<div style="'+css+'top: 100%; left: 50%; cursor: s-resize;" class="transfo-scaler-bc"></div>'
+'<div style="'+css+'top: 50%; left: 0%; cursor: w-resize;" class="transfo-scaler-ml"></div>'
+'<div style="'+css+'top: 50%; left: 100%; cursor: e-resize;" class="transfo-scaler-mr"></div>'
+'<div style="'+css+'border: 0; width: 0px; height: 0px; top: 50%; left: 50%;" class="transfo-scaler-mc"></div>'
+'</div>'
+'</div>');transfo.$center=transfo.$markup.find(".transfo-scaler-mc");_setOptions($this,transfo);_overwriteOptions($this,transfo,settings);$("body").append(transfo.$markup);setTimeout(function(){_targetCss($this,transfo);},0);_bind($this,transfo);_targetCss($this,transfo);_stop_animation($this[0]);}
function _overwriteOptions($this,transfo,settings){transfo.settings=$.extend(transfo.settings,settings||{});}
function _stop_animation(target){target.style.webkitAnimationPlayState="paused";target.style.animationPlayState="paused";target.style.webkitTransition="none";target.style.transition="none";}
function _setOptions($this,transfo){var style=$this.attr("style")||"";var transform=style.match(/transform\s*:([^;]+)/)?style.match(/transform\s*:([^;]+)/)[1]:"";transfo.settings={};transfo.settings.angle=transform.indexOf('rotate')!=-1?parseFloat(transform.match(/rotate\(([^)]+)deg\)/)[1]):0;transfo.settings.scalex=transform.indexOf('scaleX')!=-1?parseFloat(transform.match(/scaleX\(([^)]+)\)/)[1]):1;transfo.settings.scaley=transform.indexOf('scaleY')!=-1?parseFloat(transform.match(/scaleY\(([^)]+)\)/)[1]):1;transfo.settings.style=style.replace(/[^;]*transform[^;]+/g,'').replace(/;+/g,';');$this.attr("style",transfo.settings.style);_stop_animation($this[0]);transfo.settings.pos=$this.offset();transfo.settings.height=$this.innerHeight();transfo.settings.width=$this.innerWidth();var translatex=transform.match(/translateX\(([0-9.-]+)(%|px)\)/);var translatey=transform.match(/translateY\(([0-9.-]+)(%|px)\)/);transfo.settings.translate="%";if(translatex&&translatex[2]==="%"){transfo.settings.translatexp=parseFloat(translatex[1]);transfo.settings.translatex=transfo.settings.translatexp/100*transfo.settings.width;}else{transfo.settings.translatex=translatex?parseFloat(translatex[1]):0;}
if(translatey&&translatey[2]==="%"){transfo.settings.translateyp=parseFloat(translatey[1]);transfo.settings.translatey=transfo.settings.translateyp/100*transfo.settings.height;}else{transfo.settings.translatey=translatey?parseFloat(translatey[1]):0;}
transfo.settings.css=window.getComputedStyle($this[0],null);transfo.settings.rotationStep=5;transfo.settings.hide=false;transfo.settings.callback=function(){};}
function _bind($this,transfo){function mousedown(event){_mouseDown($this,this,transfo,event);$(document).on("mousemove",mousemove).on("mouseup",mouseup);}
function mousemove(event){_mouseMove($this,this,transfo,event);}
function mouseup(event){_mouseUp($this,this,transfo,event);$(document).off("mousemove",mousemove).off("mouseup",mouseup);}
transfo.$markup.off().on("mousedown",mousedown);transfo.$markup.find(".transfo-controls >:not(.transfo-scaler-mc)").off().on("mousedown",mousedown);}
function _mouseDown($this,div,transfo,event){event.preventDefault();if(transfo.active||event.which!==1)return;var type="position",$e=$(div);if($e.hasClass("transfo-rotator"))type="rotator";else if($e.hasClass("transfo-scaler-tl"))type="tl";else if($e.hasClass("transfo-scaler-tr"))type="tr";else if($e.hasClass("transfo-scaler-br"))type="br";else if($e.hasClass("transfo-scaler-bl"))type="bl";else if($e.hasClass("transfo-scaler-tc"))type="tc";else if($e.hasClass("transfo-scaler-bc"))type="bc";else if($e.hasClass("transfo-scaler-ml"))type="ml";else if($e.hasClass("transfo-scaler-mr"))type="mr";transfo.active={"type":type,"scalex":transfo.settings.scalex,"scaley":transfo.settings.scaley,"pageX":event.pageX,"pageY":event.pageY,"center":transfo.$center.offset(),};}
function _mouseUp($this,div,transfo,event){transfo.active=null;}
function _mouseMove($this,div,transfo,event){event.preventDefault();if(!transfo.active)return;var settings=transfo.settings;var center=transfo.active.center;var cdx=center.left-event.pageX;var cdy=center.top-event.pageY;if(transfo.active.type=="rotator"){var ang,dang=Math.atan((settings.width*settings.scalex)/(settings.height*settings.scaley))/rad;if(cdy)ang=Math.atan(-cdx/cdy)/rad;else ang=0;if(event.pageY>=center.top&&event.pageX>=center.left)ang+=180;else if(event.pageY>=center.top&&event.pageX<center.left)ang+=180;else if(event.pageY<center.top&&event.pageX<center.left)ang+=360;ang-=dang;if(settings.scaley<0&&settings.scalex<0)ang+=180;if(!event.ctrlKey){settings.angle=Math.round(ang/transfo.settings.rotationStep)*transfo.settings.rotationStep;}else{settings.angle=ang;}
_targetCss($this,transfo);var new_center=transfo.$center.offset();var x=center.left-new_center.left;var y=center.top-new_center.top;var angle=ang*rad;settings.translatex+=x*Math.cos(angle)-y*Math.sin(-angle);settings.translatey+=-x*Math.sin(angle)+y*Math.cos(-angle);}
else if(transfo.active.type=="position"){var angle=settings.angle*rad;var x=event.pageX-transfo.active.pageX;var y=event.pageY-transfo.active.pageY;transfo.active.pageX=event.pageX;transfo.active.pageY=event.pageY;var dx=x*Math.cos(angle)-y*Math.sin(-angle);var dy=-x*Math.sin(angle)+y*Math.cos(-angle);settings.translatex+=dx;settings.translatey+=dy;}
else if(transfo.active.type.length===2){var angle=settings.angle*rad;var dx=cdx*Math.cos(angle)-cdy*Math.sin(-angle);var dy=-cdx*Math.sin(angle)+cdy*Math.cos(-angle);if(transfo.active.type.indexOf("t")!=-1){settings.scaley=dy/(settings.height/2);}
if(transfo.active.type.indexOf("b")!=-1){settings.scaley=-dy/(settings.height/2);}
if(transfo.active.type.indexOf("l")!=-1){settings.scalex=dx/(settings.width/2);}
if(transfo.active.type.indexOf("r")!=-1){settings.scalex=-dx/(settings.width/2);}
if(settings.scaley>0&&settings.scaley<0.05)settings.scaley=0.05;if(settings.scalex>0&&settings.scalex<0.05)settings.scalex=0.05;if(settings.scaley<0&&settings.scaley>-0.05)settings.scaley=-0.05;if(settings.scalex<0&&settings.scalex>-0.05)settings.scalex=-0.05;if(event.shiftKey&&(transfo.active.type==="tl"||transfo.active.type==="bl"||transfo.active.type==="tr"||transfo.active.type==="br")){settings.scaley=settings.scalex;}}
settings.angle=Math.round(settings.angle);settings.translatex=Math.round(settings.translatex);settings.translatey=Math.round(settings.translatey);settings.scalex=Math.round(settings.scalex*100)/100;settings.scaley=Math.round(settings.scaley*100)/100;_targetCss($this,transfo);_stop_animation($this[0]);return false;}
function _setCss($this,css,settings){var transform="";var trans=false;if(settings.angle!==0){trans=true;transform+=" rotate("+settings.angle+"deg) ";}
if(settings.translatex){trans=true;transform+=" translateX("+(settings.translate==="%"?settings.translatexp+"%":settings.translatex+"px")+") ";}
if(settings.translatey){trans=true;transform+=" translateY("+(settings.translate==="%"?settings.translateyp+"%":settings.translatey+"px")+") ";}
if(settings.scalex!=1){trans=true;transform+=" scaleX("+settings.scalex+") ";}
if(settings.scaley!=1){trans=true;transform+=" scaleY("+settings.scaley+") ";}
if(trans){css+=";"
css+="-webkit-transform:"+transform+";"
+"-moz-transform:"+transform+";"
+"-ms-transform:"+transform+";"
+"-o-transform:"+transform+";"
+"transform:"+transform+";";}
css=css.replace(/(\s*;)+/g,';').replace(/^\s*;|;\s*$/g,'');$this.attr("style",css);}
function _targetCss($this,transfo){var settings=transfo.settings;var width=parseFloat(settings.css.width);var height=parseFloat(settings.css.height);settings.translatexp=Math.round(settings.translatex/width*1000)/10;settings.translateyp=Math.round(settings.translatey/height*1000)/10;_setCss($this,settings.style,settings);transfo.$markup.css({"position":"absolute","width":width+"px","height":height+"px","top":settings.pos.top+"px","left":settings.pos.left+"px"});var $controls=transfo.$markup.find('.transfo-controls');_setCss($controls,"width:"+width+"px;"+"height:"+height+"px;"+"cursor: move;",settings);$controls.children().css("transform","scaleX("+(1/settings.scalex)+") scaleY("+(1/settings.scaley)+")");_showHide($this,transfo);transfo.settings.callback.call($this[0],$this);}
function _showHide($this,transfo){transfo.$markup.css("z-index",transfo.settings.hide?-1:1000);if(transfo.settings.hide){transfo.$markup.find(".transfo-controls > *").hide();transfo.$markup.find(".transfo-scaler-mc").show();}else{transfo.$markup.find(".transfo-controls > *").show();}}
function _destroy($this){$this.data('transfo').$markup.remove();$this.removeData('transfo');}
function _reset($this){var transfo=$this.data('transfo');_destroy($this);$this.transfo(transfo.settings);}})(jQuery);;

/* /website/static/src/js/website.mobile.js defined in bundle 'website.assets_editor' */
odoo.define('website.mobile',function(require){'use strict';var ajax=require('web.ajax');var core=require('web.core');var Dialog=require('web.Dialog');var Widget=require('web.Widget');var base=require('web_editor.base');var website=require('website.website');var _t=core._t;var MobilePreviewDialog=Dialog.extend({template:'website.mobile_preview',init:function(){this._super.apply(this,arguments);this.mobile_src=$.param.querystring(window.location.href,'mobilepreview');},start:function(){var self=this;this.$modal.addClass('oe_mobile_preview');this.$modal.on('click','.modal-header',function(){self.$el.toggleClass('o_invert_orientation');});this.$iframe=this.$('iframe');this.$iframe.on('load',function(e){self.$iframe.contents().find('body').removeClass('o_connected_user');self.$iframe.contents().find('#oe_main_menu_navbar, #o_website_add_page_modal').remove();});return this._super.apply(this,arguments);},});website.TopBar.include({start:function(){var self=this;this.$el.on('click','a[data-action=show-mobile-preview]',function(){new MobilePreviewDialog(self,{title:_t('Mobile preview')+" <span class='fa fa-refresh'/>",}).open();});return this._super();},});});;

/* /website/static/src/js/website.seo.js defined in bundle 'website.assets_editor' */
odoo.define('website.seo',function(require){'use strict';var core=require('web.core');var ajax=require('web.ajax');var Class=require('web.Class');var Dialog=require('web.Dialog');var mixins=require('web.mixins');var Model=require('web.Model');var Widget=require('web.Widget');var base=require('web_editor.base');var website=require('website.website');var _t=core._t;var qweb=core.qweb;ajax.loadXML('/website/static/src/xml/website.seo.xml',qweb);var WORD_SEPARATORS_REGEX='([\\u2000-\\u206F\\u2E00-\\u2E7F\'!"#\\$%&\\(\\)\\*\\+,\\-\\.\\/:;<=>\\?¿¡@\\[\\]\\^_`\\{\\|\\}~\\s]+|^|$)';function analyzeKeyword(htmlPage,keyword){return htmlPage.isInTitle(keyword)?{title:'label label-primary',description:"This keyword is used in the page title",}:htmlPage.isInDescription(keyword)?{title:'label label-info',description:"This keyword is used in the page description",}:htmlPage.isInBody(keyword)?{title:'label label-info',description:"This keyword is used in the page content."}:{title:'label label-default',description:"This keyword is not used anywhere on the page."};}
var Suggestion=Widget.extend({template:'website.seo_suggestion',events:{'click .js_seo_suggestion':'select',},init:function(parent,options){this.root=options.root;this.keyword=options.keyword;this.language=options.language;this.htmlPage=options.page;this._super(parent);},start:function(){this.htmlPage.on('title-changed',this,this.renderElement);this.htmlPage.on('description-changed',this,this.renderElement);},analyze:function(){return analyzeKeyword(this.htmlPage,this.keyword);},highlight:function(){return this.analyze().title;},tooltip:function(){return this.analyze().description;},select:function(){this.trigger('selected',this.keyword);},});var SuggestionList=Widget.extend({template:'website.seo_suggestion_list',init:function(parent,options){this.root=options.root;this.language=options.language;this.htmlPage=options.page;this._super(parent);},start:function(){this.refresh();},refresh:function(){var self=this;self.$el.append(_t("Loading..."));var language=self.language||base.get_context().lang.toLowerCase();ajax.jsonRpc('/website/seo_suggest','call',{'keywords':self.root,'lang':language,}).then(function(keyword_list){self.addSuggestions(JSON.parse(keyword_list));});},addSuggestions:function(keywords){var self=this;self.$el.empty();var regex=new RegExp(self.root,"gi");var keywords=_.map(_.uniq(keywords),function(word){return word.replace(regex,"").trim();});_.each(keywords,function(keyword){if(keyword){var suggestion=new Suggestion(self,{root:self.root,language:self.language,keyword:keyword,page:self.htmlPage,});suggestion.on('selected',self,function(word,language){self.trigger('selected',word,language);});suggestion.appendTo(self.$el);}});},});var Keyword=Widget.extend({template:'website.seo_keyword',events:{'click a[data-action=remove-keyword]':'destroy',},maxWordsPerKeyword:4,init:function(parent,options){this.keyword=options.word;this.language=options.language;this.htmlPage=options.page;this._super(parent);},start:function(){this.htmlPage.on('title-changed',this,this.updateLabel);this.htmlPage.on('description-changed',this,this.updateLabel);this.suggestionList=new SuggestionList(this,{root:this.keyword,language:this.language,page:this.htmlPage,});this.suggestionList.on('selected',this,function(word,language){this.trigger('selected',word,language);});this.suggestionList.appendTo(this.$('.js_seo_keyword_suggestion'));},analyze:function(){return analyzeKeyword(this.htmlPage,this.keyword);},highlight:function(){return this.analyze().title;},tooltip:function(){return this.analyze().description;},updateLabel:function(){var cssClass="oe_seo_keyword js_seo_keyword "+this.highlight();this.$(".js_seo_keyword").attr('class',cssClass);this.$(".js_seo_keyword").attr('title',this.tooltip());},destroy:function(){this.trigger('removed');this._super();},});var KeywordList=Widget.extend({template:'website.seo_list',maxKeywords:10,init:function(parent,options){this.htmlPage=options.page;this._super(parent);},start:function(){var self=this;var existingKeywords=self.htmlPage.keywords();if(existingKeywords.length>0){_.each(existingKeywords,function(word){self.add.call(self,word);});}},keywords:function(){var result=[];this.$('.js_seo_keyword').each(function(){result.push($(this).data('keyword'));});return result;},isFull:function(){return this.keywords().length>=this.maxKeywords;},exists:function(word){return _.contains(this.keywords(),word);},add:function(candidate,language){var self=this;var word=candidate?candidate.replace(/[,;.:<>]+/g," ").replace(/ +/g," ").trim().toLowerCase():"";if(word&&!self.isFull()&&!self.exists(word)){var keyword=new Keyword(self,{word:word,language:language,page:this.htmlPage,});keyword.on('removed',self,function(){self.trigger('list-not-full');self.trigger('removed',word);});keyword.on('selected',self,function(word,language){self.trigger('selected',word,language);});keyword.appendTo(self.$el);}
if(self.isFull()){self.trigger('list-full');}},});var Image=Widget.extend({template:'website.seo_image',init:function(parent,options){this.src=options.src;this.alt=options.alt;this._super(parent);},});var ImageList=Widget.extend({init:function(parent,options){this.htmlPage=options.page;this._super(parent);},start:function(){var self=this;this.htmlPage.images().each(function(index,image){new Image(self,image).appendTo(self.$el);});},images:function(){var result=[];this.$('input').each(function(){var $input=$(this);result.push({src:$input.attr('src'),alt:$input.val(),});});return result;},add:function(image){new Image(this,image).appendTo(this.$el);},});var Preview=Widget.extend({template:'website.seo_preview',init:function(parent,options){this.title=options.title;this.url=options.url;this.description=options.description||"[ The description will be generated by google unless you specify one ]";this._super(parent);},});var HtmlPage=Class.extend(mixins.PropertiesMixin,{url:function(){var url=window.location.href;var hashIndex=url.indexOf('#');return hashIndex>=0?url.substring(0,hashIndex):url;},title:function(){var $title=$('title');return($title.length>0)&&$title.text()&&$title.text().trim();},changeTitle:function(title){$('title').text(title);this.trigger('title-changed',title);},description:function(){var $description=$('meta[name=description]');return($description.length>0)&&($description.attr('content')&&$description.attr('content').trim());},changeDescription:function(description){$('meta[name=description]').attr('content',description);this.trigger('description-changed',description);},keywords:function(){var $keywords=$('meta[name=keywords]');var parsed=($keywords.length>0)&&$keywords.attr('content')&&$keywords.attr('content').split(",");return(parsed&&parsed[0])?parsed:[];},changeKeywords:function(keywords){$('meta[name=keywords]').attr('content',keywords.join(","));this.trigger('keywords-changed',keywords);},headers:function(tag){return $('#wrap '+tag).map(function(){return $(this).text();});},images:function(){return $('#wrap img').map(function(){var $img=$(this);return{src:$img.attr('src'),alt:$img.attr('alt'),};});},company:function(){return $('html').attr('data-oe-company-name');},bodyText:function(){return $('body').children().not('.js_seo_configuration').text();},isInBody:function(text){return new RegExp(WORD_SEPARATORS_REGEX+text+WORD_SEPARATORS_REGEX,"gi").test(this.bodyText());},isInTitle:function(text){return new RegExp(WORD_SEPARATORS_REGEX+text+WORD_SEPARATORS_REGEX,"gi").test(this.title());},isInDescription:function(text){return new RegExp(WORD_SEPARATORS_REGEX+text+WORD_SEPARATORS_REGEX,"gi").test(this.description());},});var Tip=Widget.extend({template:'website.seo_tip',events:{'closed.bs.alert':'destroy',},init:function(parent,options){this.message=options.message;this.type=options.type||'info';this._super(parent);},});var Configurator=Dialog.extend({template:'website.seo_configuration',events:{'keyup input[name=seo_page_keywords]':'confirmKeyword','blur input[name=seo_page_title]':'titleChanged','blur textarea[name=seo_page_description]':'descriptionChanged','click button[data-action=add]':'addKeyword',},canEditTitle:false,canEditDescription:false,canEditKeywords:false,canEditLanguage:false,maxTitleSize:65,maxDescriptionSize:160,init:function(parent,options){options=options||{};_.defaults(options,{title:_t('Promote This Page'),subtitle:_t('Get this page efficiently referenced in Google to attract more visitors.'),buttons:[{text:_t('Save'),classes:'btn-primary',click:this.update},{text:_t('Discard'),close:true},],});this._super(parent,options);},start:function(){var self=this;this.$modal.addClass('oe_seo_configuration js_seo_configuration');this.htmlPage=new HtmlPage();this.$('.js_seo_page_url').text(this.htmlPage.url());this.$('input[name=seo_page_title]').val(this.htmlPage.title());this.$('textarea[name=seo_page_description]').val(this.htmlPage.description());this.keywordList=new KeywordList(self,{page:this.htmlPage});this.keywordList.on('list-full',self,function(){self.$('input[name=seo_page_keywords]').attr({readonly:"readonly",placeholder:"Remove a keyword first"});self.$('button[data-action=add]').prop('disabled',true).addClass('disabled');});this.keywordList.on('list-not-full',self,function(){self.$('input[name=seo_page_keywords]').removeAttr('readonly').attr('placeholder',"");self.$('button[data-action=add]').prop('disabled',false).removeClass('disabled');});this.keywordList.on('selected',self,function(word,language){self.keywordList.add(word,language);});this.keywordList.appendTo(this.$('.js_seo_keywords_list'));this.disableUnsavableFields();this.renderPreview();this.getLanguages();},getLanguages:function(){var self=this;ajax.jsonRpc('/web/dataset/call_kw','call',{model:'website',method:'get_languages',args:[[base.get_context().website_id]],kwargs:{context:base.get_context()}}).then(function(data){self.$('#language-box').html(core.qweb.render('Configurator.language_promote',{'language':data,'def_lang':base.get_context().lang}));});},disableUnsavableFields:function(){var self=this;this.loadMetaData().then(function(data){self.canEditTitle=data&&('website_meta_title'in data);self.canEditDescription=data&&('website_meta_description'in data);self.canEditKeywords=data&&('website_meta_keywords'in data);if(!self.canEditTitle){self.$('input[name=seo_page_title]').attr('disabled',true);}
if(!self.canEditDescription){self.$('textarea[name=seo_page_description]').attr('disabled',true);}
if(!self.canEditTitle&&!self.canEditDescription&&!self.canEditKeywords){self.$footer.find('button[data-action=update]').attr('disabled',true);}});},suggestImprovements:function(){var self=this;var tips=[];_.each(tips,function(tip){displayTip(tip.message,tip.type);});function displayTip(message,type){new Tip(self,{message:message,type:type,}).appendTo(self.$('.js_seo_tips'));}},confirmKeyword:function(e){if(e.keyCode==13){this.addKeyword();}},addKeyword:function(word){var $input=this.$('input[name=seo_page_keywords]');var $language=this.$('select[name=seo_page_language]');var keyword=_.isString(word)?word:$input.val();var language=$language.val().toLowerCase();this.keywordList.add(keyword,language);$input.val("");},update:function(){var self=this;var data={};if(this.canEditTitle){data.website_meta_title=this.htmlPage.title();}
if(this.canEditDescription){data.website_meta_description=this.htmlPage.description();}
if(this.canEditKeywords){data.website_meta_keywords=this.keywordList.keywords().join(", ");}
this.saveMetaData(data).then(function(){self.close();});},getMainObject:function(){var repr=$('html').data('main-object');var m=repr.match(/(.+)\((\d+),(.*)\)/);if(!m){return null;}else{return{model:m[1],id:m[2]|0};}},loadMetaData:function(){var obj=this.getMainObject();var def=$.Deferred();if(!obj){def.resolve(null);}else{var fields=['website_meta_title','website_meta_description','website_meta_keywords'];var model=new Model(obj.model).call('read',[[obj.id],fields,base.get_context()]).then(function(data){if(data.length){var meta=data[0];meta.model=obj.model;def.resolve(meta);}else{def.resolve(null);}}).fail(function(){def.reject();});}
return def;},saveMetaData:function(data){var obj=this.getMainObject();if(!obj){return $.Deferred().reject();}else{return new Model(obj.model).call('write',[[obj.id],data,base.get_context()]);}},titleChanged:function(){var self=this;_.defer(function(){var title=self.$('input[name=seo_page_title]').val();self.htmlPage.changeTitle(title);self.renderPreview();});},descriptionChanged:function(){var self=this;_.defer(function(){var description=self.$('textarea[name=seo_page_description]').val();self.htmlPage.changeDescription(description);self.renderPreview();});},renderPreview:function(){var preview=new Preview(this,{title:this.htmlPage.title(),description:this.htmlPage.description(),url:this.htmlPage.url(),});var $preview=this.$('.js_seo_preview');$preview.empty();preview.appendTo($preview);},destroy:function(){this.htmlPage.changeKeywords(this.keywordList.keywords());this._super.apply(this,arguments);},});website.TopBar.include({start:function(){this.$el.on('click','a[data-action=promote-current-page]',function(){new Configurator(this).open();});return this._super();}});return{Configurator:Configurator,};});;

/* /website/static/src/js/website.tour.banner.js defined in bundle 'website.assets_editor' */
odoo.define("website.tour.banner",function(require){"use strict";var core=require("web.core");var tour=require("web_tour.tour");var base=require("web_editor.base");var _t=core._t;tour.register("banner",{url:"/",wait_for:base.ready(),},[{trigger:"a[data-action=edit]",content:_t("<b>Click Edit</b> to start designing your homepage."),position:"bottom",},{trigger:"#snippet_structure .oe_snippet:eq(1) .oe_snippet_thumbnail",content:_t("Drag the <i>Cover</i> block and drop it in your page."),position:"bottom",run:"drag_and_drop",},{trigger:"#wrapwrap .s_text_block_image_fw h2",content:_t("<b>Click on a text</b> to start editing it. <i>It's that easy to edit your content!</i>"),position:"left",width:150,run:"text",},{trigger:".oe_overlay_options .oe_options",extra_trigger:"#wrapwrap .s_text_block_image_fw h2:not(:containsExact(\"Headline\"))",content:_t("Customize any block through this menu. Try to change the background of the banner."),position:"bottom",},{trigger:"#snippet_structure .oe_snippet:eq(3) .oe_snippet_thumbnail",content:_t("Drag another block in your page, below the cover."),position:"bottom",run:"drag_and_drop",},{trigger:"button[data-action=save]",extra_trigger:".oe_overlay_options .oe_options",content:_t("Publish your page by clicking on the <b>Save</b> button."),position:"bottom",},{trigger:"a[data-action=show-mobile-preview]",content:_t("Good Job! You created your first page. Let's check how this page looks like on <b>mobile devices</b>."),position:"bottom",},{trigger:".modal-dialog:has(#mobile-viewport) button[data-dismiss=modal]",content:_t("After having checked how it looks on mobile, <b>close the preview</b>."),position:"right",},{trigger:"#oe_main_menu_navbar a[data-action=new_page]",content:_t("<p><b>That's it.</b> Your homepage is live.</p><p>Continue adding more pages to your site or edit this page to make it even more awesome.</p>"),position:"bottom",}]);});odoo.define("website.tour.contact",function(require){"use strict";var core=require("web.core");var tour=require("web_tour.tour");var base=require("web_editor.base");var _t=core._t;tour.register("contact",{url:"/page/contactus",wait_for:base.ready(),},[{trigger:"li#customize-menu",content:_t("<b>Install a contact form</b> to improve this page."),extra_trigger:"#o_contact_mail",position:"bottom",},{trigger:"li#install_apps",content:_t("<b>Install new apps</b> to get more features. Let's install the <i>'Contact form'</i> app."),position:"bottom",}]);});;

/* /website/static/src/js/website.ace.js defined in bundle 'website.assets_editor' */
odoo.define('website.ace',function(require){'use strict';var ajax=require('web.ajax');var Widget=require('web.Widget');var website=require('website.website');var AceCommon=require('web_editor.ace');var hash="#advanced-view-editor";var Ace=Widget.extend({events:{'click a[data-action=ace]':'launchAce',},launchAce:function(e){var self=this;if(!window.ace&&!this.loadJS_def){this.loadJS_def=ajax.loadJS('/web/static/lib/ace/ace.odoo-custom.js').then(function(){return $.when(ajax.loadJS('/web/static/lib/ace/mode-xml.js'),ajax.loadJS('/web/static/lib/ace/theme-monokai.js'));});}
if(e){e.preventDefault();}
return $.when(this.loadJS_def).then(function(){if(self.globalEditor){self.globalEditor.open();}else{self.globalEditor=new ViewEditor(self);self.globalEditor.appendTo($(document.body));}});},});var ViewEditor=AceCommon.ViewEditor.extend({loadTemplates:function(){var self=this;var args={key:$(document.documentElement).data('view-xmlid'),full:true,bundles:this.$('.js_include_bundles')[0].checked};return ajax.jsonRpc('/website/customize_template_get','call',args).then(function(views){self.loadViews.call(self,views);self.open.call(self);var curentHash=window.location.hash;var indexOfView=curentHash.indexOf("?view=");if(indexOfView>=0){var viewId=parseInt(curentHash.substring(indexOfView+6,curentHash.length),10);self.$('#ace-view-list').val(viewId).change();}else{if(views.length>=2){var mainTemplate=views[0];self.$('#ace-view-list').val(mainTemplate.id).trigger('change');}
window.location.hash=hash;}});},displayError:function(){var error=this._super.apply(this,arguments);website.error(error.title,error.message);},updateHash:function(){window.location.hash=hash+"?view="+this.selectedViewId();},reloadPage:function(){this.updateHash();window.location.reload();},close:function(){window.location.hash="";this.$el.removeClass('oe_ace_open').addClass('oe_ace_closed');},});website.TopBar.include({start:function(){this.ace=new Ace();return $.when(this._super.apply(this,arguments),this.ace.attachTo($('#html_editor')));},});});;

/* /website/static/src/js/website.translator.js defined in bundle 'website.assets_editor' */
odoo.define('website.translator',function(require){'use strict';var core=require('web.core');var ajax=require('web.ajax');var Widget=require('web.Widget');var base=require('web_editor.base');var translate=require('web_editor.translate');var website=require('website.website');var local_storage=require('web.local_storage');var utils=require('web.utils');var qweb=core.qweb;if(!translate.translatable){return;}
website.TopBar.include({events:_.extend({},website.TopBar.prototype.events,{'click [data-action="edit_master"]':'edit_master','click [data-action="translate"]':'translate',}),translate:function(ev){ev.preventDefault();if(translate.edit_translations){translate.instance.edit();}else{location.search+='&edit_translations';}},edit_master:function(ev){ev.preventDefault();var lang='/'+utils.get_cookie('website_lang');var current=document.createElement('a');current.href=window.location.toString();current.search+=(current.search?'&':'?')+'enable_editor=1';if(current.pathname.indexOf(lang)===0){current.pathname=current.pathname.replace(lang,'');}
var link=document.createElement('a');link.href='/website/lang/default';link.search+=(link.search?'&':'?')+'r='+encodeURIComponent(current.pathname+current.search+current.hash);window.location=link.href;},});if(!translate.edit_translations){return;}
ajax.loadXML('/website/static/src/xml/website.translator.xml',qweb);var nodialog='website_translator_nodialog';var Translate=translate.Class.include({onTranslateReady:function(){if(this.gengo_translate){this.translation_gengo_display();}
this._super();},edit:function(){$("#oe_main_menu_navbar").hide();if(!local_storage.getItem(nodialog)){var dialog=new TranslatorDialog();dialog.appendTo($(document.body));dialog.on('activate',this,function(){if(dialog.$('input[name=do_not_show]').prop('checked')){local_storage.setItem(nodialog,true);}else{local_storage.removeItem(nodialog);}
dialog.$el.modal('hide');});}
return this._super();},cancel:function(){$("#oe_main_menu_navbar").show();return this._super();}});var TranslatorDialog=Widget.extend({events:_.extend({},website.TopBar.prototype.events,{'hidden.bs.modal':'destroy','click button[data-action=activate]':function(ev){this.trigger('activate');},}),template:'website.TranslatorDialog',start:function(){this.$el.modal();},});});;

/* /website/static/src/js/website.theme.js defined in bundle 'website.assets_editor' */
odoo.define('website.theme',function(require){'use strict';var ajax=require('web.ajax');var core=require('web.core');var session=require('web.session');var Widget=require('web.Widget');var base=require('web_editor.base');var website=require('website.website');var QWeb=core.qweb;ajax.jsonRpc('/web/dataset/call','call',{'model':'ir.ui.view','method':'read_template','args':['website.theme_customize',base.get_context()]}).done(function(data){QWeb.add_template(data);});ajax.jsonRpc('/web/dataset/call','call',{'model':'ir.ui.view','method':'read_template','args':['web_editor.colorpicker',base.get_context()]}).done(function(data){QWeb.add_template(data);});var Theme=Widget.extend({template:'website.theme_customize',events:{'change input[data-xmlid],input[data-enable],input[data-disable]':'change_selection','mousedown label:has(input[data-xmlid],input[data-enable],input[data-disable])':function(event){var self=this;this.time_select=_.defer(function(){var input=$(event.target).find('input').length?$(event.target).find('input'):$(event.target).parent().find('input');self.on_select(input,event);});},'click .close':'close','click':'click',},start:function(){var self=this;this.timer=null;this.reload=false;this.flag=false;this.active_select_tags();this.$inputs=this.$("input[data-xmlid],input[data-enable],input[data-disable]");setTimeout(function(){self.$el.addClass('in');},0);this.keydown_escape=function(event){if(event.keyCode===27){self.close();}};$(document).on('keydown',this.keydown_escape);return this.load_xml_data().then(function(){self.flag=true;});},active_select_tags:function(){var uniqueID=0;var self=this;var $selects=this.$('select:has(option[data-xmlid],option[data-enable],option[data-disable])');$selects.each(function(){uniqueID++;var $select=$(this);var $options=$select.find('option[data-xmlid], option[data-enable], option[data-disable]');$options.each(function(){var $option=$(this);var $input=$('<input style="display: none;" type="radio" name="theme_customize_modal-select-'+uniqueID+'"/>');$input.attr('id',$option.attr('id'));$input.attr('data-xmlid',$option.data('xmlid'));$input.attr('data-enable',$option.data('enable'));$input.attr('data-disable',$option.data('disable'));$option.removeAttr('id');$option.data('input',$input);$input.on('update',function(){$option.attr('selected',$(this).prop("checked"));});self.$el.append($input);});$select.data("value",$options.first());$options.first().attr("selected",true);});$selects.change(function(){var $option=$(this).find('option:selected');$(this).data("value").data("input").prop("checked",true).change();$(this).data("value",$option);$option.data("input").change();});},load_xml_data:function(){var self=this;$('#theme_error').remove();return ajax.jsonRpc('/website/theme_customize_get','call',{'xml_ids':this.get_xml_ids(this.$inputs)}).done(function(data){self.$inputs.filter('[data-xmlid=""]').prop("checked",true).change();self.$inputs.filter('[data-xmlid]:not([data-xmlid=""])').each(function(){if(!_.difference(self.get_xml_ids($(this)),data[1]).length){$(this).prop("checked",false).trigger("change",true);}
if(!_.difference(self.get_xml_ids($(this)),data[0]).length){$(this).prop("checked",true).trigger("change",true);}});}).fail(function(d,error){$('body').prepend($('<div id="theme_error"/>').text(error.data.message));});},get_inputs:function(string){return this.$inputs.filter('#'+string.split(/\s*,\s*/).join(", #"));},get_xml_ids:function($inputs){var xml_ids=[];$inputs.each(function(){if($(this).data('xmlid')&&$(this).data('xmlid').length){xml_ids=xml_ids.concat($(this).data('xmlid').split(/\s*,\s*/));}});return xml_ids;},update_style:function(enable,disable,reload){if(this.$el.hasClass("loading")){return;}
this.$el.addClass('loading');if(!reload&&session.debug!=="assets"){var self=this;return ajax.jsonRpc('/website/theme_customize','call',{enable:enable,disable:disable,get_bundle:true,}).then(function(bundleHTML){var $links=$('link[href*=".assets_frontend"]');var $newLinks=$(bundleHTML).filter('link');var linksLoaded=$.Deferred();var nbLoaded=0;$newLinks.on('load',function(e){if(++nbLoaded>=$newLinks.length){linksLoaded.resolve();}});$newLinks.on('error',function(e){linksLoaded.reject();window.location.hash="theme=true";window.location.reload();});$links.last().after($newLinks);return linksLoaded.then(function(){$links.remove();self.$el.removeClass('loading');});});}else{var href='/website/theme_customize_reload'+'?href='+encodeURIComponent(window.location.href)+'&enable='+encodeURIComponent(enable.join(","))+'&disable='+encodeURIComponent(disable.join(","));window.location.href=href;return $.Deferred();}},enable_disable:function($inputs,enable){$inputs.each(function(){var check=$(this).prop("checked");var $label=$(this).closest("label");$(this).prop("checked",enable);if(enable)$label.addClass("checked");else $label.removeClass("checked");if(check!=enable){$(this).change();}});},change_selection:function(event,init_mode){var self=this;clearTimeout(this.time_select);if(this.$el.hasClass("loading"))return;var $option=$(event.target).is('input')?$(event.target):$("input",event.target),$options=$option,checked=$option.prop("checked");if(checked){if($option.data('enable')){var $inputs=this.get_inputs($option.data('enable'));$options=$options.add($inputs.filter(':not(:checked)'));this.enable_disable($inputs,true);}
if($option.data('disable')){var $inputs=this.get_inputs($option.data('disable'));$options=$options.add($inputs.filter(':checked'));this.enable_disable($inputs,false);}
$option.closest("label").addClass("checked");}else{$option.closest("label").removeClass("checked");}
var $enable=this.$inputs.filter('[data-xmlid]:checked');$enable.closest("label").addClass("checked");var $disable=this.$inputs.filter('[data-xmlid]:not(:checked)');$disable.closest("label").removeClass("checked");var $sets=this.$inputs.filter('input[data-enable]:not([data-xmlid]), input[data-disable]:not([data-xmlid])');$sets.each(function(){var $set=$(this);var checked=true;if($set.data("enable")){self.get_inputs($(this).data("enable")).each(function(){if(!$(this).prop("checked"))checked=false;});}
if($set.data("disable")){self.get_inputs($(this).data("disable")).each(function(){if($(this).prop("checked"))checked=false;});}
if(checked){$set.prop("checked",true).closest("label").addClass("checked");}else{$set.prop("checked",false).closest("label").removeClass("checked");}
$set.trigger('update');});if(this.flag&&$option.data('reload')&&document.location.href.match(new RegExp($option.data('reload')))){this.reload=true;}
clearTimeout(this.timer);if(this.flag){this.timer=_.defer(function(){if(!init_mode)self.on_select($options,event);self.update_style(self.get_xml_ids($enable),self.get_xml_ids($disable),self.reload);self.reload=false;});}else{this.timer=_.defer(function(){if(!init_mode)self.on_select($options,event);self.reload=false;});}},on_select:function($inputs,event){clearTimeout(this.time_select);},click:function(event){if(!$(event.target).closest("#theme_customize_modal > *").length){this.close();}},close:function(){var self=this;$(document).off('keydown',this.keydown_escape);$('#theme_error').remove();$('link[href*=".assets_"]').removeAttr('data-loading');this.$el.removeClass('in');this.$el.addClass('out');setTimeout(function(){self.destroy();},500);}});function themeError(message){var _t=core._t;if(message.indexOf('lessc')){message='<span class="text-muted">'+message+"</span><br/><br/>"+_t("Please install or update node-less");}
website.error(_t("Theme Error"),message);}
function theme_customize(){if(Theme.open&&!Theme.open.isDestroyed())return;Theme.open=new Theme();Theme.open.appendTo("body");var error=window.getComputedStyle(document.body,':before').getPropertyValue('content');if(error&&error!=='none'){themeError(eval(error));}}
website.TopBar.include({start:function(){var self=this;base.ready().then(function(){self.$el.on('click',"#theme_customize a",theme_customize);if((window.location.hash||"").indexOf("theme=true")!==-1){theme_customize();window.location.hash="";}});return this._super();}});return Theme;});;

/* /website/static/src/js/web_planner_website.js defined in bundle 'website.assets_editor' */
odoo.define('web.planner.website',function(require){'use strict';var ajax=require('web.ajax');var core=require('web.core');var Model=require('web.Model');var Widget=require('web.Widget');var planner=require('web.planner.common');require('web_editor.base');var qweb=core.qweb;if(!$('#oe_main_menu_navbar').length){return $.Deferred().reject("DOM doesn't contain #oe_main_menu_navbar");}
var WebsitePlannerLauncher=Widget.extend({template:"PlannerLauncher",start:function(){var self=this;var res=this._super.apply(this,arguments);this.$('.progress').show();return res.then(this.get_website_planner.bind(this)).then(function(planner){self.$el.on('click',self,self.show_dialog.bind(self));if(planner.length){self.planner=planner[0];self.planner.data=$.parseJSON(planner[0].data)||{};self.setup();}});},get_website_planner:function(){return(new Model('web.planner')).call('search_read',[[['planner_application','=','planner_website']]]);},setup:function(){var self=this;this.dialog=new planner.PlannerDialog(this,this.planner);this.dialog.appendTo($('<div>'));this.$(".progress").tooltip({html:true,title:this.planner.tooltip_planner,placement:'bottom',container:'body',delay:{'show':700}});this.dialog.on("planner_progress_changed",this,function(percent){self.update_parent_progress_bar(percent);});},update_parent_progress_bar:function(percent){this.$(".progress-bar").css('width',percent+"%");},show_dialog:function(){this.dialog.$el.appendTo(document.body);this.dialog.$el.modal('show');},});return ajax.loadXML('/web_planner/static/src/xml/web_planner.xml',qweb).then(function(){var websitePlannerLauncher=new WebsitePlannerLauncher();websitePlannerLauncher.prependTo($('#oe_main_menu_navbar .o_menu_systray'));});});;

/* /website/static/src/js/website.contentMenu.js defined in bundle 'website.assets_editor' */
odoo.define('website.contentMenu',function(require){"use strict";var core=require('web.core');var ajax=require('web.ajax');var Widget=require('web.Widget');var base=require('web_editor.base');var editor=require('web_editor.editor');var widget=require('web_editor.widget');var website=require('website.website');var _t=core._t;var qweb=core.qweb;ajax.loadXML('/website/static/src/xml/website.contentMenu.xml',qweb);var TopBarContent=Widget.extend({start:function(){var self=this;this.$el.add($('#o_website_add_page_modal')).on('click','a[data-action]',function(e){e.preventDefault();self[$(this).data('action')]();});return this._super();},edit_menu:function(action_before_reload){var context=base.get_context();var def=$.Deferred();if($("[data-content_menu_id]").length){var select=new SelectEditMenuDialog();select.on('save',this,function(root){def.resolve(root);});select.open();}else{def.resolve(null);}
return def.then(function(root_id){return ajax.jsonRpc('/web/dataset/call_kw','call',{model:'website.menu',method:'get_tree',args:[context.website_id,root_id],kwargs:{context:context},}).then(function(menu){var dialog=new EditMenuDialog(this,{},menu).open();dialog.on("save",null,function(){$.when(action_before_reload&&action_before_reload()).then(function(){editor.reload();});});return dialog;});});},new_page:function(){website.prompt({id:"editor_new_page",window_title:_t("New Page"),input:_t("Page Title"),init:function(){var $group=this.$dialog.find("div.form-group");$group.removeClass("mb0");var $add=$('<div/>',{'class':'form-group mb0'}).append($('<span/>',{'class':'col-sm-offset-3 col-sm-9 text-left'}).append(qweb.render('web_editor.components.switch',{id:'switch_addTo_menu',label:_t("Add page in menu")})));$add.find('input').prop('checked',true);$group.after($add);}}).then(function(val,field,$dialog){if(val){var url='/website/add/'+encodeURIComponent(val);if($dialog.find('input[type="checkbox"]').is(':checked'))url+="?add_menu=1";document.location=url;}});},rename_page:function(){var self=this;var context=base.get_context();self.mo_id=self.getMainObject().id;ajax.jsonRpc('/web/dataset/call_kw','call',{model:'website',method:'page_search_dependencies',args:[self.mo_id],kwargs:{context:context},}).then(function(deps){website.prompt({id:"editor_rename_page",window_title:_t("Rename This Page"),dependencies:deps,},'website.rename_page').then(function(val,field,$dialog){ajax.jsonRpc('/web/dataset/call_kw','call',{model:'website',method:'rename_page',args:[self.mo_id,val,],kwargs:{context:context},}).then(function(new_name){window.location="/page/"+encodeURIComponent(new_name);});});});},delete_page:function(){var self=this;var context=base.get_context();self.mo_id=self.getMainObject().id;ajax.jsonRpc('/web/dataset/call_kw','call',{model:'website',method:'page_search_dependencies',args:[self.mo_id],kwargs:{context:context,},}).then(function(deps){website.prompt({id:"editor_delete_page",window_title:_t("Delete Page"),dependencies:deps,init:function(){$('.btn-continue').prop("disabled",true);},},'website.delete_page').then(function(val,field,$dialog){if($dialog.find('input[type="checkbox"]').is(':checked')){ajax.jsonRpc('/web/dataset/call_kw','call',{model:'website',method:'delete_page',args:[self.mo_id],kwargs:{context:context},}).then(function(){window.location="/";});}});});},getMainObject:function(){var repr=$('html').data('main-object');var m=repr.match(/(.+)\((\d+),(.*)\)/);if(!m){return null;}else{return{model:m[1],id:m[2]|0};}}});website.TopBar.include({start:function(){this.content_menu=new TopBarContent();var def=this.content_menu.attachTo($('.oe_content_menu'));return $.when(this._super(),def);}});var SelectEditMenuDialog=widget.Dialog.extend({template:'website.contentMenu.dialog.select',init:function(parent,options){var self=this;self.roots=[{id:null,name:_t("Top Menu")}];$("[data-content_menu_id]").each(function(){self.roots.push({id:$(this).data("content_menu_id"),name:$(this).attr("name")});});this._super(parent,_.extend({},{title:_t("Select a Menu"),save_text:_t("Continue")},options||{}));},save:function(){this.final_data=parseInt(this.$el.find("select").val()||null);this._super.apply(this,arguments);}});var EditMenuDialog=widget.Dialog.extend({template:'website.contentMenu.dialog.edit',events:_.extend({},widget.Dialog.prototype.events,{'click a.js_add_menu':'add_menu','click button.js_edit_menu':'edit_menu','click button.js_delete_menu':'delete_menu',}),init:function(parent,options,menu){this.menu=menu;this.root_menu_id=menu.id;this.flat=this.flatenize(menu);this.to_delete=[];this._super(parent,_.extend({},{title:_t("Edit Menu")},options||{}));},start:function(){var r=this._super.apply(this,arguments);this.$('.oe_menu_editor').nestedSortable({listType:'ul',handle:'div',items:'li',maxLevels:2,toleranceElement:'> div',forcePlaceholderSize:true,opacity:0.6,placeholder:'oe_menu_placeholder',tolerance:'pointer',attribute:'data-menu-id',expression:'()(.+)',});return r;},flatenize:function(node,dict){dict=dict||{};var self=this;dict[node.id]=node;node.children.forEach(function(child){self.flatenize(child,dict);});return dict;},add_menu:function(){var self=this;var dialog=new MenuEntryDialog(this,{},undefined,{});dialog.on('save',this,function(link){var new_menu={id:_.uniqueId('new-'),name:link.text,url:link.url,new_window:link.isNewWindow,parent_id:false,sequence:0,children:[],};self.flat[new_menu.id]=new_menu;self.$('.oe_menu_editor').append(qweb.render('website.contentMenu.dialog.submenu',{submenu:new_menu}));});dialog.open();},edit_menu:function(ev){var self=this;var menu_id=$(ev.currentTarget).closest('[data-menu-id]').data('menu-id');var menu=self.flat[menu_id];if(menu){var dialog=new MenuEntryDialog(this,{},undefined,menu);dialog.on('save',this,function(link){var id=link.id;var menu_obj=self.flat[id];_.extend(menu_obj,{'name':link.text,'url':link.url,'new_window':link.isNewWindow,});var $menu=self.$('[data-menu-id="'+id+'"]');$menu.find('.js_menu_label').first().text(menu_obj.name);});dialog.open();}else{alert("Could not find menu entry");}},delete_menu:function(ev){var $menu=$(ev.currentTarget).closest('[data-menu-id]');var mid=$menu.data('menu-id')|0;if(mid){this.to_delete.push(mid);}
$menu.remove();},save:function(){var _super=this._super.bind(this);var self=this;var new_menu=this.$('.oe_menu_editor').nestedSortable('toArray',{startDepthCount:0});var levels=[];var data=[];var context=base.get_context();new_menu.forEach(function(menu){if(menu.id){levels[menu.depth]=(levels[menu.depth]||0)+1;var mobj=self.flat[menu.id];mobj.sequence=levels[menu.depth];mobj.parent_id=(menu.parent_id|0)||menu.parent_id||self.root_menu_id;delete(mobj.children);data.push(mobj);}});ajax.jsonRpc('/web/dataset/call_kw','call',{model:'website.menu',method:'save',args:[[context.website_id],{data:data,to_delete:self.to_delete}],kwargs:{context:context},}).then(function(){return _super();});},});var MenuEntryDialog=widget.LinkDialog.extend({init:function(parent,options,editor,data){data.text=data.name||'';data.isNewWindow=data.new_window;this.data=data;return this._super.apply(this,arguments);},start:function(){var self=this;this.$(".link-style").remove();this.$("label[for=link-new]").text("Menu Label");return $.when(this._super.apply(this,arguments)).then(function(){var $link_text=self.$('#link-text').focus();self.$('#link-page').change(function(e){if($link_text.val()){return;}
var data=$(this).select2('data');$link_text.val(data.create?data.id:data.text);$link_text.focus();});});},save:function(){var $e=this.$('#link-text');if(!$e.val()||!$e[0].checkValidity()){$e.closest('.form-group').addClass('has-error');$e.focus();return;}
return this._super.apply(this,arguments);}});return{'TopBar':TopBarContent,'EditMenuDialog':EditMenuDialog,};});;

/* /website/static/src/js/website.snippets.editor.js defined in bundle 'website.assets_editor' */
odoo.define('website.snippets.editor',function(require){'use strict';var ajax=require("web.ajax");var core=require("web.core");var Dialog=require("web.Dialog");var Model=require("web.Model");var editor=require("web_editor.editor");var animation=require('web_editor.snippets.animation');var options=require('web_editor.snippets.options');var snippet_editor=require('web_editor.snippet.editor');var website=require('website.website');var _t=core._t;snippet_editor.Class.include({_get_snippet_url:function(){return'/website/snippets';}});options.registry.menu_data=options.Class.extend({start:function(){this._super.apply(this,arguments);this.link=this.$target.attr("href");},on_focus:function(){this._super.apply(this,arguments);(new Dialog(null,{title:_t("Confirmation"),$content:$(core.qweb.render("website.leaving_current_page_edition")),buttons:[{text:_t("Go to Link"),classes:"btn-primary",click:save_editor_then_go_to.bind(null,this.link)},{text:_t("Edit the menu"),classes:"btn-primary",click:function(){var self=this;website.topBar.content_menu.edit_menu(function(){return editor.editor_bar.save_without_reload();}).then(function(dialog){self.close();});}},{text:_t("Stay on this page"),close:true}]})).open();function save_editor_then_go_to(url){editor.editor_bar.save_without_reload().then(function(){window.location.href=url;});}},});options.registry.company_data=options.Class.extend({start:function(){this._super.apply(this,arguments);var proto=options.registry.company_data.prototype;if(proto.__link_deferred===undefined){proto.__link_deferred=$.Deferred();return ajax.jsonRpc("/web/session/get_session_info","call").then(function(session){return(new Model("res.users")).get_func("read")(session.uid,["company_id"]).then(function(res){proto.__link_deferred.resolve("/web#action=base.action_res_company_form&view_type=form&id="+(res&&res[0]&&res[0].company_id[0]||1));});});}},on_focus:function(){this._super.apply(this,arguments);var proto=options.registry.company_data.prototype;Dialog.confirm(null,_t("Do you want to edit the company data ?"),{confirm_callback:function(){editor.editor_bar.save_without_reload().then(function(){proto.__link_deferred.then(function(link){window.location.href=link;});});},});},});options.registry.slider=options.Class.extend({drop_and_build_snippet:function(){this.id="myCarousel"+new Date().getTime();this.$target.attr("id",this.id);this.$target.find("[data-slide]").attr("data-cke-saved-href","#"+this.id);this.$target.find("[data-target]").attr("data-target","#"+this.id);this.rebind_event();},on_clone:function($clone){var id="myCarousel"+new Date().getTime();$clone.attr("id",id);$clone.find("[data-slide]").attr("href","#"+id);$clone.find("[data-slide-to]").attr("data-target","#"+id);},rebind_event:function(){var self=this;this.$target.find('.carousel-indicators [data-slide-to]').off('click').on('click',function(){self.$target.carousel(+$(this).data('slide-to'));});},clean_for_save:function(){this._super();this.$target.find(".item").removeClass("next prev left right active").first().addClass("active");this.$target.find('.carousel-indicators').find('li').removeClass('active').first().addClass("active");},start:function(){this._super.apply(this,arguments);this.$target.carousel({interval:false});this.id=this.$target.attr("id");this.$inner=this.$target.find('.carousel-inner');this.$indicators=this.$target.find('.carousel-indicators');this.$target.carousel('pause');this.rebind_event();},add_slide:function(type){if(type!=="click")return;var self=this;var cycle=this.$inner.find('.item').length;var $active=this.$inner.find('.item.active, .item.prev, .item.next').first();var index=$active.index();this.$target.find('.carousel-control, .carousel-indicators').removeClass("hidden");this.$indicators.append('<li data-target="#'+this.id+'" data-slide-to="'+cycle+'"></li>');var $snippets=this.buildingBlock.$snippets;var selection=this.$target.closest('[class*="s_"');if(_.isUndefined(selection)){var point=0;var className=_.compact(this.$target.attr("class").split(" "));$snippets.find('.oe_snippet_body').each(function(){var len=_.intersection(_.compact(this.className.split(" ")),className).length;if(len>point){point=len;selection=this;}});}
else{var s_class=selection.attr('class').split(' ').filter(function(o){return _.str.startsWith(o,"s_");})[0];selection=$snippets.find("."+s_class);}
var $clone=$(selection).find('.item:first').clone();$clone.removeClass('active').insertAfter($active);setTimeout(function(){self.$target.carousel().carousel(++index);self.rebind_event();},0);return $clone;},remove_slide:function(type){if(type!=="click"||this.remove_process)return;var self=this;var $items=this.$inner.find('.item');var cycle=$items.length-1;var $active=$items.filter('.active');var index=$active.index();if(cycle>0){this.remove_process=true;this.$target.on('slid.bs.carousel.slide_removal',function(event){$active.remove();self.$indicators.find("li:last").remove();self.$target.off('slid.bs.carousel.slide_removal');self.rebind_event();self.remove_process=false;if(cycle===1){self.$target.find('.carousel-control, .carousel-indicators').addClass("hidden");}});_.defer(function(){self.$target.carousel(index>0?--index:cycle);});}},interval:function(type,value){this.$target.attr("data-interval",value);},set_active:function(){this.$el.find('li[data-interval]').removeClass("active").filter('li[data-interval='+this.$target.attr("data-interval")+']').addClass("active");},});options.registry.carousel=options.registry.slider.extend({getSize:function(){this.grid=this._super();this.grid.size=8;return this.grid;},clean_for_save:function(){this._super();this.$target.removeClass('oe_img_bg '+this._class).css("background-image","");},load_style_options:function(){this._super();$(".snippet-option-size li[data-value='']").remove();},start:function(){var self=this;this._super.apply(this,arguments);this.$target.on('slid.bs.carousel',function(){self.$target.carousel("pause");if(!self.editor)return;_.each(["background","background_position","colorpicker"],function(opt_name){var s_option=self.editor.styles[opt_name];if(!s_option)return;s_option.$target=self.$target.find(".item.active");s_option.set_active();s_option.$target.trigger("snippet-option-change",[s_option]);if(opt_name==='background'){s_option.bind_bg_events();}});});this.$target.trigger('slid.bs.carousel');},rebind_event:function(){var self=this;this.$target.find('.carousel-control').off('click').on('click',function(){self.$target.carousel($(this).data('slide'));});this._super.apply(this,arguments);this.$target.find('.item.text_image, .item.image_text, .item.text_only').find('.container > .carousel-caption > div, .container > img.carousel-image').attr('contentEditable','true');},});options.registry["margin-x"]=options.registry.marginAndResize.extend({preventChildPropagation:true,getSize:function(){this.grid=this._super();var width=this.$target.parents(".row:first").first().outerWidth();var grid=[1,2,3,4,5,6,7,8,9,10,11,12];this.grid.e=[_.map(grid,function(v){return'col-md-'+v;}),_.map(grid,function(v){return width/12*v;})];grid=[-12,-11,-10,-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9,10,11];this.grid.w=[_.map(grid,function(v){return'col-md-offset-'+v;}),_.map(grid,function(v){return width/12*v;}),12];return this.grid;},on_clone:function($clone,options){if(options.isCurrent){var _class=$clone.attr("class").replace(/\s*(col-lg-offset-|col-md-offset-)([0-9-]+)/g,'');$clone.attr("class",_class);}
return false;},on_resize:function(compass,beginClass,current){if(compass==='w'){var beginCol=Number(beginClass.match(/col-md-([0-9]+)|$/)[1]||0);var beginOffset=Number(beginClass.match(/col-md-offset-([0-9-]+)|$/)[1]||beginClass.match(/col-lg-offset-([0-9-]+)|$/)[1]||0);var offset=Number(this.grid.w[0][current].match(/col-md-offset-([0-9-]+)|$/)[1]||0);if(offset<0){offset=0;}
var colSize=beginCol-(offset-beginOffset);if(colSize<=0){colSize=1;offset=beginOffset+beginCol-1;}
this.$target.attr("class",this.$target.attr("class").replace(/\s*(col-lg-offset-|col-md-offset-|col-md-)([0-9-]+)/g,''));this.$target.addClass('col-md-'+(colSize>12?12:colSize));if(offset>0){this.$target.addClass('col-md-offset-'+offset);}}
this._super(compass,beginClass,current);},});options.registry.parallax=options.Class.extend({getSize:function(){this.grid=this._super.apply(this,arguments);this.grid.size=8;return this.grid;},on_resize:function(){this._refresh();},_refresh:function(){this.$target.data("snippet-view").set_values();},start:function(){this._super.apply(this,arguments);if(!this.$target.data("snippet-view")){this.$target.data("snippet-view",new animation.registry.parallax(this.$target));}
this.scroll();this._refresh_callback=this._refresh.bind(this);this.buildingBlock.$el.on("snippet-dropped snippet-activated",this._refresh_callback);this.$target.on('snippet-option-change snippet-option-preview',this._refresh_callback);},scroll:function(type,value){this.$target.attr("data-scroll-background-ratio",value);this._refresh();},set_active:function(){this.$el.find('[data-scroll]').removeClass("active").filter('[data-scroll="'+(this.$target.attr('data-scroll-background-ratio')||0)+'"]').addClass("active");},clean_for_save:function(){this._super.apply(this,arguments);this.$target.css("background-position",'').css("background-attachment",'');},on_move:function(){this._super.apply(this,arguments);this._refresh();},on_remove:function(){this._super.apply(this,arguments);this.$target.off("snippet-option-change snippet-option-preview",this._refresh_callback);this.buildingBlock.$el.off("snippet-dropped snippet-activated",this._refresh_callback);},});options.registry.ul=options.Class.extend({start:function(){var self=this;this._super();this.$target.data("snippet-view",new animation.registry.ul(this.$target,true));this.$target.on('mouseup','.o_ul_toggle_self, .o_ul_toggle_next',function(){setTimeout(function(){self.buildingBlock.cover_target(self.$overlay,self.$target);},0);});},reset_ul:function(){this.$target.find('.o_ul_toggle_self, .o_ul_toggle_next').remove();this.$target.find('li:has(>ul,>ol)').map(function(){var texts=_.filter(_.toArray(this.childNodes),function(a){return a.nodeType==3;});if(!texts.length||!texts.reduce(function(a,b){return a.textContent+b.textContent;}).match(/\S/)){return;}
$(this).children('ul,ol').addClass('o_close');return $(this).children(':not(ul,ol)')[0]||this;}).prepend('<a href="#" class="o_ul_toggle_self fa" />');var $li=this.$target.find('li:has(+li:not(>.o_ul_toggle_self)>ul, +li:not(>.o_ul_toggle_self)>ol)');$li.map(function(){return $(this).children()[0]||this;}).prepend('<a href="#" class="o_ul_toggle_next fa" />');$li.removeClass('o_open').next().addClass('o_close');this.$target.find("li").removeClass('o_open').css('list-style','');this.$target.find("li:has(.o_ul_toggle_self, .o_ul_toggle_next), li:has(>ul,>ol):not(:has(>li))").css('list-style','none');},clean_for_save:function(){this._super();if(!this.$target.hasClass('o_ul_folded')){this.$target.find(".o_close").removeClass("o_close");}
this.$target.find("li:not(:has(>ul))").css('list-style','');},toggle_class:function(type,value,$li){this._super(type,value,$li);this.$target.data("snippet-view").stop();this.reset_ul();this.$target.find("li:not(:has(>ul))").css('list-style','');this.$target.data("snippet-view",new animation.registry.ul(this.$target,true));}});options.registry.collapse=options.Class.extend({start:function(){var self=this;this._super();this.$target.on('shown.bs.collapse hidden.bs.collapse','[role="tabpanel"]',function(){self.buildingBlock.cover_target(self.$overlay,self.$target);});},create_ids:function($target){var time=new Date().getTime();var $tab=$target.find('[data-toggle="collapse"]');var $tablist=$target.closest('.panel-group');var tablist_id=$tablist.attr("id");if(!tablist_id){tablist_id="myCollapse"+time;$tablist.attr("id",tablist_id);}
$tab.attr('data-parent',"#"+tablist_id);$tab.data('parent',"#"+tablist_id);var $panel=$target.find('.panel-collapse');var panel_id=$panel.attr("id");if(!panel_id){while($('#'+(panel_id="myCollapseTab"+time)).length){time++;}
$panel.attr("id",panel_id);}
$tab.attr('data-target',"#"+panel_id);$tab.data('target',"#"+panel_id);},drop_and_build_snippet:function(){this._super();this.create_ids(this.$target);},on_clone:function($clone){this._super.apply(this,arguments);$clone.find('[data-toggle="collapse"]').removeAttr('data-target').removeData('target');$clone.find('.panel-collapse').removeAttr('id');this.create_ids($clone);},on_move:function(){this._super();this.create_ids(this.$target);var $panel=this.$target.find('.panel-collapse').removeData('bs.collapse');if($panel.attr('aria-expanded')==='true'){$panel.closest('.panel-group').find('.panel-collapse[aria-expanded="true"]').filter(function(){return this!==$panel[0];}).collapse('hide').one('hidden.bs.collapse',function(){$panel.trigger('shown.bs.collapse');});}}});return options;});odoo.define('website.rte.summernote',function(require){'use strict';var core=require('web.core');require('web_editor.rte.summernote');var eventHandler=$.summernote.eventHandler;var renderer=$.summernote.renderer;var tplIconButton=renderer.getTemplate().iconButton;var _t=core._t;var fn_tplPopovers=renderer.tplPopovers;renderer.tplPopovers=function(lang,options){var $popover=$(fn_tplPopovers.call(this,lang,options));$popover.find('.note-image-popover .btn-group:has([data-value="img-thumbnail"])').append(tplIconButton('fa fa-object-ungroup',{title:_t('Transform the picture (click twice to reset transformation)'),event:'transform',}));return $popover;};$.summernote.pluginEvents.transform=function(event,editor,layoutInfo,sorted){var $selection=layoutInfo.handle().find('.note-control-selection');var $image=$($selection.data('target'));if($image.data('transfo-destroy')){$image.removeData('transfo-destroy');return;}
$image.transfo();var mouseup=function(event){$('.note-popover button[data-event="transform"]').toggleClass('active',$image.is('[style*="transform"]'));};$(document).on('mouseup',mouseup);var mousedown=function(event){if(!$(event.target).closest('.transfo-container').length){$image.transfo("destroy");$(document).off('mousedown',mousedown).off('mouseup',mouseup);}
if($(event.target).closest('.note-popover').length){$image.data('transfo-destroy',true).attr("style",($image.attr("style")||'').replace(/[^;]*transform[\w:]*;?/g,''));}
$image.trigger('content_changed');};$(document).on('mousedown',mousedown);};var fn_boutton_update=eventHandler.modules.popover.button.update;eventHandler.modules.popover.button.update=function($container,oStyle){fn_boutton_update.call(this,$container,oStyle);$container.find('button[data-event="transform"]').toggleClass('active',$(oStyle.image).is('[style*="transform"]')).toggleClass('hidden',!$(oStyle.image).is('img'));};});;

/* /website/static/src/js/website.snippets.gallery.js defined in bundle 'website.assets_editor' */
odoo.define('website.snippets.editor.gallery',function(require){'use strict';var ajax=require('web.ajax');var core=require('web.core');var base=require('web_editor.base');var widget=require('web_editor.widget');var animation=require('web_editor.snippets.animation');var options=require('web_editor.snippets.options');var snippet_editor=require('web_editor.snippet.editor');var _t=core._t;var qweb=core.qweb;ajax.loadXML('/website/static/src/xml/website.gallery.xml',qweb);options.registry.gallery=options.Class.extend({start:function(){this._super();this.bind_change();var index=Math.max(_.map(this.$target.find("img").get(),function(img){return img.dataset.index|0;}));this.$target.find("img:not([data-index])").each(function(){index++;$(this).attr('data-index',index).data('index',index);});this.$target.attr("contentEditable",false);this._temp_mode=this.$el.find("data-mode").data("mode");this._temp_col=this.$el.find("data-columns").data("columns");},drop_and_build_snippet:function(){var uuid=new Date().getTime();this.$target.find('.carousel').attr('id','slideshow_'+uuid);this.$target.find('[data-target]').attr('data-target','#slideshow_'+uuid);},styling:function(type,value){var classes=this.$el.find('li[data-styling]').map(function(){return $(this).data('styling');}).get().join(' ');this.$target.find("img").removeClass(classes).addClass(value);},interval:function(type,value){this.$target.find('.carousel:first').attr("data-interval",value);},reapply:function(){var self=this,modes=['o_nomode','o_grid','o_masonry','o_slideshow'],classes=this.$target.attr("class").split(/\s+/);this.cancel_masonry();modes.forEach(function(mode){if(classes.indexOf(mode)!=-1){self.mode("reapply",mode.slice(2,Infinity));return;}});this.$target.attr("contentEditable",false);},bind_change:function(){var self=this;return this.$target.find("img").off('save').on('save',function(event,img){var $parent=$(img).parent();$parent.addClass("saved_active");var index=self.$target.find(".item.saved_active").index();$parent.removeClass("saved_active");self.$target.find(".carousel:first li[data-target]:eq("+index+")").css("background-image","url("+$(img).attr("src")+")");});},get_imgs:function(){var imgs=this.$target.find("img").addClass("img img-thumbnail img-responsive mb8 mt8").detach().get();imgs.sort(function(a,b){return $(a).data('index')-$(b).data('index');});return imgs;},mode:function(type,value,$li){if(type!=="reapply"&&type!=="click"&&this._temp_mode===value){return;}
this._temp_mode=value;this.cancel_masonry();if(!value)value='nomode';this[value](type);this.$target.removeClass('o_nomode o_masonry o_grid o_slideshow').addClass("o_"+value);this.bind_change();},replace:function($content){var $container=this.$target.find(".container:first");$container.empty().append($content);return $container;},nomode:function(type){if(type!=="reapply"&&!this.$target.attr('class').match(/o_grid|o_masonry|o_slideshow/))return;var self=this,$row=$('<div class="row"></div>'),$imgs=$(this.get_imgs());this.replace($row);$imgs.each(function(){var $wrap=$(this).wrap('<div>').parent();var img=this;if(img.width>=img.height*2){$wrap.addClass("col-md-6");}else if(img.width>600){$wrap.addClass("col-md-6");}else{$wrap.addClass("col-md-3");}
$row.append($wrap);});this.$target.css("height","");},cancel_masonry:function(){clearTimeout(this.timer);$(this.masonry_imgs).appendTo(this.$target);this.masonry_imgs=[];},masonry:function(type){var self=this,imgs=this.get_imgs(),columns=this.get_columns(),colClass=undefined,$cols=[];var $row=$("<div class='row'/>");this.replace($row);if(columns===0){columns=3;this.$target.attr("data-columns",columns);}
colClass="col-md-"+(12/columns);for(var c=0;c<columns;c++){var $col=$('<div class="col o_snippet_not_selectable"></div>').addClass(colClass);$row.append($col);$cols.push($col.get()[0]);}
imgs.reverse();$cols=$($cols);function add(){self.lowest($cols).append(imgs.pop());if(imgs.length)self.timer=setTimeout(add,0);}
this.masonry_imgs=imgs;if(imgs.length)add();this.$target.css("height","");},grid:function(type){if(type!=="reapply"&&this.$target.hasClass('o_grid'))return;var self=this,$imgs=$(this.get_imgs()),$col,$img,$row=$('<div class="row"></div>'),columns=this.get_columns()||3,colClass="col-md-"+(12/columns),$container=this.replace($row);$imgs.each(function(index){$img=$(this);$col=$img.wrap('<div>').parent();self.img_preserve_styles($img);self.img_responsive($img);$col.addClass(colClass);$col.appendTo($row);if((index+1)%columns===0){$row=$('<div class="row"></div>');$row.appendTo($container);}});this.$target.css("height","");},slideshow:function(type){if(type!=="reapply"&&this.$target.hasClass('o_slideshow'))return;var self=this,$imgs=$(this.get_imgs()),urls=$imgs.map(function(){return $(this).attr("src");}).get();var params={srcs:urls,index:0,title:"",interval:this.$target.data("interval")||false,id:"slideshow_"+new Date().getTime()},$slideshow=$(qweb.render('website.gallery.slideshow',params));this.replace($slideshow);this.$target.find(".item img").each(function(index){$(this).attr('data-index',index).data('index',index);});this.$target.css("height",Math.round(window.innerHeight*0.7));this.$target.off('slide.bs.carousel').off('slid.bs.carousel');this.$target.find('li.fa').off('click');if(this.$target.data("snippet-view",view)){var view=new animation.registry.gallery_slider(this.$target,true);this.$target.data("snippet-view",view);}else{this.$target.data("snippet-view").start(true);}},columns:function(type,value){this.$target.attr("data-columns",value);if(this._temp_col!==value){this._temp_col=value;this.reapply();}},images_add:function(type){if(type!=="click")return;var self=this;var $container=this.$target.find(".container:first");var editor=new widget.MediaDialog(null,{select_images:true},this.$target.closest('.o_editable'),null).open();var index=Math.max(0,_.max(_.map(this.$target.find("img").get(),function(img){return img.dataset.index|0;}))+1);editor.on('save',this,function(attachments){for(var i=0;i<attachments.length;i++){$('<img class="img img-responsive mb8 mt8"/>').attr("src",attachments[i].src).attr('data-index',index+i).data('index',index+i).appendTo($container);}
self.reapply();setTimeout(function(){self.buildingBlock.make_active(self.$target);},0);});},images_rm:function(type){if(type!=="click")return;this.replace($('<div class="alert alert-info css_editable_mode_display"/>').text(_t("Add Images from the 'Customize' menu")));},sizing:function(){},styles_to_preserve:function($img){var styles=['img-rounded','img-thumbnail','img-circle','shadow','fa-spin'];var preserved=[];for(var style in styles){if($img.hasClass(style)){preserved.push(style);}}
return preserved.join(' ');},img_preserve_styles:function($img){var classes=this.styles_to_preserve($img);$img.removeAttr("class");$img.addClass(classes);return $img;},img_responsive:function(img){img.addClass("img img-responsive");return img;},lowest:function($cols){var height=0,min=-1,col=0,lowest=undefined;$cols.each(function(){var $col=$(this);height=$col.height();if(min===-1||height<min){min=height;lowest=$col;}});return lowest;},get_columns:function(){return parseInt(this.$target.attr("data-columns")||3);},clean_for_save:function(){var self=this;if(this.$target.hasClass("slideshow")){this.$target.removeAttr("style");}},set_active:function(){this._super();var classes=_.uniq((this.$target.attr("class").replace(/(^|\s)o_/g,' ')||'').split(/\s+/));var $li=this.$el.find('[data-mode]').removeClass("active").filter('[data-mode="'+classes.join('"], [data-mode="')+'"]').addClass("active");var mode=this.$el.find('[data-mode].active').data('mode');var classes=_.uniq((this.$target.find("img:first").attr("class")||'').split(/\s+/));var $li=this.$el.find('[data-styling]').removeClass("active").filter('[data-styling="'+classes.join('"], [data-styling="')+'"]').addClass("active");this.$el.find('li[data-interval]').removeClass("active").filter('li[data-interval='+this.$target.find(".carousel:first").attr("data-interval")+']').addClass("active");var interval=this.$target.find('.carousel:first').attr("data-interval");var $li=this.$el.find('[data-interval]').removeClass("active").filter('[data-interval='+interval+']').addClass("active");var columns=this.get_columns();var $li=this.$el.find('[data-columns]').removeClass("active").filter('[data-columns='+columns+']').addClass("active");this.$el.find('[data-columns]:first, [data-select_class="spc-none"]').parent().parent().toggle(["grid","masonry"].indexOf(mode)!==-1);this.$el.find('[data-interval]:first').parent().parent().toggle(mode==="slideshow");},});options.registry.gallery_img=options.Class.extend({position:function(type,value){if(type!=="click")return;var $parent=this.$target.closest("section");var editor=$parent.data('snippet-editor').styles.gallery;var imgs=$parent.find('img').get();imgs.sort(function(a,b){return $(a).data('index')-$(b).data('index');});var index=imgs.indexOf(this.$target[0]);switch(value){case'first':index=$(imgs.shift()).data('index')-1;break;case'prev':index=index<=1?$(imgs.shift()).data('index')-1:($(imgs[index-2]).data('index')+$(imgs[index-1]).data('index'))/2;break;case'next':index=index>=imgs.length-2?$(imgs.pop()).data('index')+1:($(imgs[index+2]).data('index')+$(imgs[index+1]).data('index'))/2;break;case'last':index=$(imgs.pop()).data('index')+1;break;}
this.$target.data('index',index);this.buildingBlock.make_active(false);setTimeout(function(){editor.reapply();},0);},on_remove:function(){var $parent=snippet_editor.globalSelector.closest(this.$target.parent());_.defer((function(){this.buildingBlock.make_active($parent);$parent.data('snippet-editor').styles.gallery.reapply();}).bind(this));},on_focus:function(){this._super.apply(this,arguments);if(this._current_src&&this._current_src!==this.$target.attr("src")){_.defer((function(){snippet_editor.globalSelector.closest(this.$target.parent()).data('snippet-editor').styles.gallery.reapply();}).bind(this));}
this._current_src=this.$target.attr("src");},});});;

/* /website_sale/static/src/js/website_sale.editor.js defined in bundle 'website.assets_editor' */
odoo.define('website_sale.editor',function(require){"use strict";var ajax=require('web.ajax');var core=require('web.core');var Model=require('web.Model');var contentMenu=require('website.contentMenu');var options=require('web_editor.snippets.options');var website=require('website.website');var _t=core._t;contentMenu.TopBar.include({new_product:function(){website.prompt({id:"editor_new_product",window_title:_t("New Product"),input:"Product Name",}).then(function(name){website.form('/shop/add_product','POST',{name:name});});},});if(!$('.js_sale').length){return $.Deferred().reject("DOM doesn't contain '.js_sale'");}
options.registry.website_sale=options.Class.extend({start:function(){var self=this;this.product_tmpl_id=parseInt(this.$target.find('[data-oe-model="product.template"]').data('oe-id'));var size_x=parseInt(this.$target.attr("colspan")||1);var size_y=parseInt(this.$target.attr("rowspan")||1);var $size=this.$el.find('ul[name="size"]');var $select=$size.find('tr:eq(0) td:lt('+size_x+')');if(size_y>=2)$select=$select.add($size.find('tr:eq(1) td:lt('+size_x+')'));if(size_y>=3)$select=$select.add($size.find('tr:eq(2) td:lt('+size_x+')'));if(size_y>=4)$select=$select.add($size.find('tr:eq(3) td:lt('+size_x+')'));$select.addClass("selected");new Model('product.style').call('search_read',[[]]).then(function(data){var $ul=self.$el.find('ul[name="style"]');for(var k in data){$ul.append($('<li data-style="'+data[k]['id']+'" data-toggle_class="'+data[k]['html_class']+'"/>').append($('<a/>').text(data[k]['name'])));}
self.set_active();});this.bind_resize();},reload:function(){if(location.href.match(/\?enable_editor/)){location.reload();}else{location.href=location.href.replace(/\?(enable_editor=1&)?|#.*|$/,'?enable_editor=1&');}},bind_resize:function(){var self=this;this.$el.on('mouseenter','ul[name="size"] table',function(event){$(event.currentTarget).addClass("oe_hover");});this.$el.on('mouseleave','ul[name="size"] table',function(event){$(event.currentTarget).removeClass("oe_hover");});this.$el.on('mouseover','ul[name="size"] td',function(event){var $td=$(event.currentTarget);var $table=$td.closest("table");var x=$td.index()+1;var y=$td.parent().index()+1;var tr=[];for(var yi=0;yi<y;yi++)tr.push("tr:eq("+yi+")");var $select_tr=$table.find(tr.join(","));var td=[];for(var xi=0;xi<x;xi++)td.push("td:eq("+xi+")");var $select_td=$select_tr.find(td.join(","));$table.find("td").removeClass("select");$select_td.addClass("select");});this.$el.on('click','ul[name="size"] td',function(event){var $td=$(event.currentTarget);var x=$td.index()+1;var y=$td.parent().index()+1;ajax.jsonRpc('/shop/change_size','call',{'id':self.product_tmpl_id,'x':x,'y':y}).then(self.reload);});},style:function(type,value,$li){if(type!=="click")return;ajax.jsonRpc('/shop/change_styles','call',{'id':this.product_tmpl_id,'style_id':value});},go_to:function(type,value){if(type!=="click")return;ajax.jsonRpc('/shop/change_sequence','call',{'id':this.product_tmpl_id,'sequence':value}).then(this.reload);}});});;

/* /website_sale/static/src/js/website_sale_tour_shop.js defined in bundle 'website.assets_editor' */
odoo.define("website_sale.tour_shop",function(require){"use strict";var core=require("web.core");var tour=require("web_tour.tour");var base=require("web_editor.base");var _t=core._t;tour.register("shop",{url:"/",wait_for:base.ready(),},[tour.STEPS.WEBSITE_NEW_PAGE,{trigger:"a[data-action=new_product]",content:_t("Select <b>New Product</b> to create it and manage its properties to boost your sales."),position:"bottom",},{trigger:".modal-dialog #editor_new_product input[type=text]",content:_t("Enter a name for your new product"),position:"right",},{trigger:".modal-dialog button.btn-primary.btn-continue",content:_t("Click on <em>Continue</em> to create the product."),position:"right",},{trigger:".product_price .o_is_inline_editable .oe_currency_value",content:_t("Edit the price of this product by clicking on the amount."),position:"bottom",run:"text 1.99",},{trigger:"#wrap img.product_detail_img",extra_trigger:".product_price .o_is_inline_editable .oe_currency_value:not(:containsExact(1.00))",content:_t("Click here to set an image describing your product."),position:"top",},{trigger:".o_select_media_dialog img:first",content:_t("Choose an image from the library."),position:"bottom",},{trigger:".o_select_media_dialog .btn.o_save_button",extra_trigger:".o_existing_attachment_cell.o_selected",content:_t("Click on <b>Save</b> to add the image to the product description."),position:"right",},{trigger:"#snippet_structure .oe_snippet:eq(8) .oe_snippet_thumbnail",extra_trigger:"body:not(.modal-open)",content:_t("Drag this website block and drop it in your page."),position:"bottom",run:"drag_and_drop",},{trigger:"button[data-action=save]",content:_t("Once you click on <b>Save</b>, your product is updated."),position:"bottom",},{trigger:".js_publish_management button.js_publish_btn.btn-danger",extra_trigger:"body:not(.editor_enable)",content:_t("Click on this button so your customers can see it."),position:"top",},{trigger:".o_web_settings_dashboard_progress_title,.progress",extra_trigger:"body:not(.editor_enable)",content:_t("Follow the steps and advices in the Odoo Planner to deploy your e-Commerce website in no time!"),position:"bottom",}]);});